// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`functional:internal/tokenize > core > should build wrapped string (0) 1`] = `
{
  "candidate": """",
  "events": [
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "eoc",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "eoc",
      },
    ],
  ],
  "lines": [],
}
`;

exports[`functional:internal/tokenize > core > should build wrapped string (1) 1`] = `
{
  "candidate": ""  "",
  "events": [
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "eoc",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "eoc",
      },
    ],
  ],
  "lines": [],
}
`;

exports[`functional:internal/tokenize > core > should build wrapped string (2) 1`] = `
{
  "candidate": ""0 1 2 3 4 5 6 7 8 9\\n"",
  "events": [
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 2,
          "line": 1,
          "offset": 1,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "0",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 2,
          "line": 1,
          "offset": 1,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "0",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 3,
          "line": 1,
          "offset": 2,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 2,
          "line": 1,
          "offset": 1,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 3,
          "line": 1,
          "offset": 2,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 2,
          "line": 1,
          "offset": 1,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 3,
          "line": 1,
          "offset": 2,
        },
        "type": "sequence",
        "value": "1",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 3,
          "line": 1,
          "offset": 2,
        },
        "type": "sequence",
        "value": "1",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 6,
          "line": 1,
          "offset": 5,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 4,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "type": "sequence",
        "value": "2",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 6,
          "line": 1,
          "offset": 5,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 4,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "type": "sequence",
        "value": "2",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 6,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 6,
          "line": 1,
          "offset": 5,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 6,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 6,
          "line": 1,
          "offset": 5,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 6,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "type": "sequence",
        "value": "3",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 6,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "type": "sequence",
        "value": "3",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 8,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 8,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 10,
          "line": 1,
          "offset": 9,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 8,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "type": "sequence",
        "value": "4",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 10,
          "line": 1,
          "offset": 9,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 8,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "type": "sequence",
        "value": "4",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 10,
          "column": 11,
          "line": 1,
          "offset": 10,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 10,
          "line": 1,
          "offset": 9,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 10,
          "column": 11,
          "line": 1,
          "offset": 10,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 10,
          "line": 1,
          "offset": 9,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 10,
          "column": 11,
          "line": 1,
          "offset": 10,
        },
        "type": "sequence",
        "value": "5",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 10,
          "column": 11,
          "line": 1,
          "offset": 10,
        },
        "type": "sequence",
        "value": "5",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 12,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 12,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 14,
          "line": 1,
          "offset": 13,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 12,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "type": "sequence",
        "value": "6",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 14,
          "line": 1,
          "offset": 13,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 12,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "type": "sequence",
        "value": "6",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 14,
          "column": 15,
          "line": 1,
          "offset": 14,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 14,
          "line": 1,
          "offset": 13,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 14,
          "column": 15,
          "line": 1,
          "offset": 14,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 14,
          "line": 1,
          "offset": 13,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 16,
          "line": 1,
          "offset": 15,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 14,
          "column": 15,
          "line": 1,
          "offset": 14,
        },
        "type": "sequence",
        "value": "7",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 16,
          "line": 1,
          "offset": 15,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 14,
          "column": 15,
          "line": 1,
          "offset": 14,
        },
        "type": "sequence",
        "value": "7",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 16,
          "column": 17,
          "line": 1,
          "offset": 16,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 16,
          "line": 1,
          "offset": 15,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 16,
          "column": 17,
          "line": 1,
          "offset": 16,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 16,
          "line": 1,
          "offset": 15,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 18,
          "line": 1,
          "offset": 17,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 16,
          "column": 17,
          "line": 1,
          "offset": 16,
        },
        "type": "sequence",
        "value": "8",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 18,
          "line": 1,
          "offset": 17,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 16,
          "column": 17,
          "line": 1,
          "offset": 16,
        },
        "type": "sequence",
        "value": "8",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 18,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 18,
          "line": 1,
          "offset": 17,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 18,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 18,
          "line": 1,
          "offset": 17,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": 1,
          "_index": 18,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 18,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "type": "sequence",
        "value": "9",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": 1,
          "_index": 18,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 18,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "type": "sequence",
        "value": "9",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 1,
          "line": 2,
          "offset": 20,
        },
        "start": {
          "_bufferIndex": 1,
          "_index": 18,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "type": "eol",
        "value": "
",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 1,
          "line": 2,
          "offset": 20,
        },
        "start": {
          "_bufferIndex": 1,
          "_index": 18,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "type": "eol",
        "value": "
",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 20,
          "column": 1,
          "line": 2,
          "offset": 20,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 1,
          "line": 2,
          "offset": 20,
        },
        "type": "eoc",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 20,
          "column": 1,
          "line": 2,
          "offset": 20,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 1,
          "line": 2,
          "offset": 20,
        },
        "type": "eoc",
      },
    ],
  ],
  "lines": [
    "0",
    "1",
    "2",
    "3",
    "4",
    "5",
    "6",
    "7",
    "8",
    "9",
    "",
  ],
}
`;

exports[`functional:internal/tokenize > core > should build wrapped string (3) 1`] = `
{
  "candidate": ""12345678\\r\\n901234567890 12345"",
  "events": [
    [
      "enter",
      {
        "end": {
          "_bufferIndex": 8,
          "_index": 0,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "12345678",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": 8,
          "_index": 0,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "12345678",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": 9,
          "_index": 0,
          "column": 1,
          "line": 2,
          "offset": 10,
        },
        "start": {
          "_bufferIndex": 8,
          "_index": 0,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "type": "eol",
        "value": "
",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": 9,
          "_index": 0,
          "column": 1,
          "line": 2,
          "offset": 10,
        },
        "start": {
          "_bufferIndex": 8,
          "_index": 0,
          "column": 9,
          "line": 1,
          "offset": 8,
        },
        "type": "eol",
        "value": "
",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 13,
          "line": 2,
          "offset": 22,
        },
        "start": {
          "_bufferIndex": 9,
          "_index": 0,
          "column": 1,
          "line": 2,
          "offset": 10,
        },
        "type": "sequence",
        "value": "901234567890",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 13,
          "line": 2,
          "offset": 22,
        },
        "start": {
          "_bufferIndex": 9,
          "_index": 0,
          "column": 1,
          "line": 2,
          "offset": 10,
        },
        "type": "sequence",
        "value": "901234567890",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 14,
          "line": 2,
          "offset": 23,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 13,
          "line": 2,
          "offset": 22,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 14,
          "line": 2,
          "offset": 23,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 13,
          "line": 2,
          "offset": 22,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 2,
          "offset": 28,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 14,
          "line": 2,
          "offset": 23,
        },
        "type": "sequence",
        "value": "12345",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 2,
          "offset": 28,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 14,
          "line": 2,
          "offset": 23,
        },
        "type": "sequence",
        "value": "12345",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 19,
          "line": 2,
          "offset": 28,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 2,
          "offset": 28,
        },
        "type": "eoc",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 19,
          "line": 2,
          "offset": 28,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 2,
          "offset": 28,
        },
        "type": "eoc",
      },
    ],
  ],
  "lines": [
    "12345678",
    "901234567890",
    "12345",
  ],
}
`;

exports[`functional:internal/tokenize > core > should build wrapped string (4) 1`] = `
{
  "candidate": ""The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox jumped over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m \\u001b[32mdog and then ran away with the unicorn.\\u001b[39m"",
  "events": [
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "The",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "The",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 4,
          "line": 1,
          "offset": 3,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "type": "sequence",
        "value": "[1mquick[22m",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 5,
          "line": 1,
          "offset": 4,
        },
        "type": "sequence",
        "value": "[1mquick[22m",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 25,
          "line": 1,
          "offset": 24,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 4,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "type": "sequence",
        "value": "brown",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 25,
          "line": 1,
          "offset": 24,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 4,
          "column": 20,
          "line": 1,
          "offset": 19,
        },
        "type": "sequence",
        "value": "brown",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 6,
          "column": 26,
          "line": 1,
          "offset": 25,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 25,
          "line": 1,
          "offset": 24,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 6,
          "column": 26,
          "line": 1,
          "offset": 25,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 25,
          "line": 1,
          "offset": 24,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 34,
          "line": 1,
          "offset": 33,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 6,
          "column": 26,
          "line": 1,
          "offset": 25,
        },
        "type": "sequence",
        "value": "[31mfox",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 34,
          "line": 1,
          "offset": 33,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 6,
          "column": 26,
          "line": 1,
          "offset": 25,
        },
        "type": "sequence",
        "value": "[31mfox",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 8,
          "column": 35,
          "line": 1,
          "offset": 34,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 34,
          "line": 1,
          "offset": 33,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 8,
          "column": 35,
          "line": 1,
          "offset": 34,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 7,
          "column": 34,
          "line": 1,
          "offset": 33,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 41,
          "line": 1,
          "offset": 40,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 8,
          "column": 35,
          "line": 1,
          "offset": 34,
        },
        "type": "sequence",
        "value": "jumped",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 41,
          "line": 1,
          "offset": 40,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 8,
          "column": 35,
          "line": 1,
          "offset": 34,
        },
        "type": "sequence",
        "value": "jumped",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 10,
          "column": 42,
          "line": 1,
          "offset": 41,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 41,
          "line": 1,
          "offset": 40,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 10,
          "column": 42,
          "line": 1,
          "offset": 41,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 9,
          "column": 41,
          "line": 1,
          "offset": 40,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 46,
          "line": 1,
          "offset": 45,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 10,
          "column": 42,
          "line": 1,
          "offset": 41,
        },
        "type": "sequence",
        "value": "over",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 46,
          "line": 1,
          "offset": 45,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 10,
          "column": 42,
          "line": 1,
          "offset": 41,
        },
        "type": "sequence",
        "value": "over",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 12,
          "column": 47,
          "line": 1,
          "offset": 46,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 46,
          "line": 1,
          "offset": 45,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 12,
          "column": 47,
          "line": 1,
          "offset": 46,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 11,
          "column": 46,
          "line": 1,
          "offset": 45,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 55,
          "line": 1,
          "offset": 54,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 12,
          "column": 47,
          "line": 1,
          "offset": 46,
        },
        "type": "sequence",
        "value": "[39mthe",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 55,
          "line": 1,
          "offset": 54,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 12,
          "column": 47,
          "line": 1,
          "offset": 46,
        },
        "type": "sequence",
        "value": "[39mthe",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 14,
          "column": 56,
          "line": 1,
          "offset": 55,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 55,
          "line": 1,
          "offset": 54,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 14,
          "column": 56,
          "line": 1,
          "offset": 55,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 13,
          "column": 55,
          "line": 1,
          "offset": 54,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 69,
          "line": 1,
          "offset": 68,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 14,
          "column": 56,
          "line": 1,
          "offset": 55,
        },
        "type": "sequence",
        "value": "[3mlazy[23m",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 69,
          "line": 1,
          "offset": 68,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 14,
          "column": 56,
          "line": 1,
          "offset": 55,
        },
        "type": "sequence",
        "value": "[3mlazy[23m",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 16,
          "column": 70,
          "line": 1,
          "offset": 69,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 69,
          "line": 1,
          "offset": 68,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 16,
          "column": 70,
          "line": 1,
          "offset": 69,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 15,
          "column": 69,
          "line": 1,
          "offset": 68,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 78,
          "line": 1,
          "offset": 77,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 16,
          "column": 70,
          "line": 1,
          "offset": 69,
        },
        "type": "sequence",
        "value": "[32mdog",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 78,
          "line": 1,
          "offset": 77,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 16,
          "column": 70,
          "line": 1,
          "offset": 69,
        },
        "type": "sequence",
        "value": "[32mdog",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 18,
          "column": 79,
          "line": 1,
          "offset": 78,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 78,
          "line": 1,
          "offset": 77,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 18,
          "column": 79,
          "line": 1,
          "offset": 78,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 17,
          "column": 78,
          "line": 1,
          "offset": 77,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 82,
          "line": 1,
          "offset": 81,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 18,
          "column": 79,
          "line": 1,
          "offset": 78,
        },
        "type": "sequence",
        "value": "and",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 82,
          "line": 1,
          "offset": 81,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 18,
          "column": 79,
          "line": 1,
          "offset": 78,
        },
        "type": "sequence",
        "value": "and",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 20,
          "column": 83,
          "line": 1,
          "offset": 82,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 82,
          "line": 1,
          "offset": 81,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 20,
          "column": 83,
          "line": 1,
          "offset": 82,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 19,
          "column": 82,
          "line": 1,
          "offset": 81,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 21,
          "column": 87,
          "line": 1,
          "offset": 86,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 20,
          "column": 83,
          "line": 1,
          "offset": 82,
        },
        "type": "sequence",
        "value": "then",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 21,
          "column": 87,
          "line": 1,
          "offset": 86,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 20,
          "column": 83,
          "line": 1,
          "offset": 82,
        },
        "type": "sequence",
        "value": "then",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 22,
          "column": 88,
          "line": 1,
          "offset": 87,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 21,
          "column": 87,
          "line": 1,
          "offset": 86,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 22,
          "column": 88,
          "line": 1,
          "offset": 87,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 21,
          "column": 87,
          "line": 1,
          "offset": 86,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 23,
          "column": 91,
          "line": 1,
          "offset": 90,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 22,
          "column": 88,
          "line": 1,
          "offset": 87,
        },
        "type": "sequence",
        "value": "ran",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 23,
          "column": 91,
          "line": 1,
          "offset": 90,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 22,
          "column": 88,
          "line": 1,
          "offset": 87,
        },
        "type": "sequence",
        "value": "ran",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 24,
          "column": 92,
          "line": 1,
          "offset": 91,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 23,
          "column": 91,
          "line": 1,
          "offset": 90,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 24,
          "column": 92,
          "line": 1,
          "offset": 91,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 23,
          "column": 91,
          "line": 1,
          "offset": 90,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 25,
          "column": 96,
          "line": 1,
          "offset": 95,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 24,
          "column": 92,
          "line": 1,
          "offset": 91,
        },
        "type": "sequence",
        "value": "away",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 25,
          "column": 96,
          "line": 1,
          "offset": 95,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 24,
          "column": 92,
          "line": 1,
          "offset": 91,
        },
        "type": "sequence",
        "value": "away",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 26,
          "column": 97,
          "line": 1,
          "offset": 96,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 25,
          "column": 96,
          "line": 1,
          "offset": 95,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 26,
          "column": 97,
          "line": 1,
          "offset": 96,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 25,
          "column": 96,
          "line": 1,
          "offset": 95,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 27,
          "column": 101,
          "line": 1,
          "offset": 100,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 26,
          "column": 97,
          "line": 1,
          "offset": 96,
        },
        "type": "sequence",
        "value": "with",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 27,
          "column": 101,
          "line": 1,
          "offset": 100,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 26,
          "column": 97,
          "line": 1,
          "offset": 96,
        },
        "type": "sequence",
        "value": "with",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 28,
          "column": 102,
          "line": 1,
          "offset": 101,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 27,
          "column": 101,
          "line": 1,
          "offset": 100,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 28,
          "column": 102,
          "line": 1,
          "offset": 101,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 27,
          "column": 101,
          "line": 1,
          "offset": 100,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 29,
          "column": 105,
          "line": 1,
          "offset": 104,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 28,
          "column": 102,
          "line": 1,
          "offset": 101,
        },
        "type": "sequence",
        "value": "the",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 29,
          "column": 105,
          "line": 1,
          "offset": 104,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 28,
          "column": 102,
          "line": 1,
          "offset": 101,
        },
        "type": "sequence",
        "value": "the",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 30,
          "column": 106,
          "line": 1,
          "offset": 105,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 29,
          "column": 105,
          "line": 1,
          "offset": 104,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 30,
          "column": 106,
          "line": 1,
          "offset": 105,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 29,
          "column": 105,
          "line": 1,
          "offset": 104,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 31,
          "column": 119,
          "line": 1,
          "offset": 118,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 30,
          "column": 106,
          "line": 1,
          "offset": 105,
        },
        "type": "sequence",
        "value": "unicorn.[39m",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 31,
          "column": 119,
          "line": 1,
          "offset": 118,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 30,
          "column": 106,
          "line": 1,
          "offset": 105,
        },
        "type": "sequence",
        "value": "unicorn.[39m",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 32,
          "column": 119,
          "line": 1,
          "offset": 118,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 31,
          "column": 119,
          "line": 1,
          "offset": 118,
        },
        "type": "eoc",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 32,
          "column": 119,
          "line": 1,
          "offset": 118,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 31,
          "column": 119,
          "line": 1,
          "offset": 118,
        },
        "type": "eoc",
      },
    ],
  ],
  "lines": [
    "The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox",
    "jumped over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m",
    "\\u001b[32mdog and then ran",
    "away with the",
    "unicorn.\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > core > should build wrapped string (5) 1`] = `
{
  "candidate": ""Hello, \\u001b[1D World!"",
  "events": [
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "Hello,",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 0,
          "column": 1,
          "line": 1,
          "offset": 0,
        },
        "type": "sequence",
        "value": "Hello,",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 2,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 1,
          "column": 7,
          "line": 1,
          "offset": 6,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "type": "sequence",
        "value": "[1D",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 2,
          "column": 8,
          "line": 1,
          "offset": 7,
        },
        "type": "sequence",
        "value": "[1D",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 4,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 3,
          "column": 12,
          "line": 1,
          "offset": 11,
        },
        "type": "space",
        "value": " ",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 4,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "type": "sequence",
        "value": "World!",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": 0,
          "_index": 4,
          "column": 13,
          "line": 1,
          "offset": 12,
        },
        "type": "sequence",
        "value": "World!",
      },
    ],
    [
      "enter",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 6,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "type": "eoc",
      },
    ],
    [
      "exit",
      {
        "end": {
          "_bufferIndex": -1,
          "_index": 6,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "start": {
          "_bufferIndex": -1,
          "_index": 5,
          "column": 19,
          "line": 1,
          "offset": 18,
        },
        "type": "eoc",
      },
    ],
  ],
  "lines": [
    "Hello,\\u001b[1D",
    "World!",
  ],
}
`;

exports[`functional:internal/tokenize > core > should handle ansi that wraps onto multiple lines 1`] = `
{
  "candidate": ""\\u001b[32mhello world\\u001b[39m hey!"",
  "lines": [
    "\\u001b[32mhello",
    "world\\u001b[39m",
    "hey!",
  ],
}
`;

exports[`functional:internal/tokenize > core > should not break sequences longer than \`columns\` (0) 1`] = `
{
  "candidate": ""The quick brown fox jumped over the lazy dog"",
  "lines": [
    "The",
    "quick",
    "brown",
    "fox",
    "jumped",
    "over",
    "the",
    "lazy",
    "dog",
  ],
}
`;

exports[`functional:internal/tokenize > core > should not break sequences longer than \`columns\` (1) 1`] = `
{
  "candidate": ""The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox jumped over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m \\u001b[32mdog and then ran away with the unicorn.\\u001b[39m"",
  "lines": [
    "The",
    "\\u001b[1mquick\\u001b[22m",
    "brown",
    "\\u001b[31mfox",
    "jumped",
    "over",
    "\\u001b[39mthe",
    "\\u001b[3mlazy\\u001b[23m",
    "\\u001b[32mdog",
    "and",
    "then",
    "ran",
    "away",
    "with",
    "the",
    "unicorn.\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > core > should not break sequences longer than \`columns\` (2) 1`] = `
{
  "candidate": ""\\u001b[34mhello\\u001b[39m-world"",
  "lines": [
    "\\u001b[34mhello\\u001b[39m-world",
  ],
}
`;

exports[`functional:internal/tokenize > core > should not break sequences longer than \`columns\` (3) 1`] = `
{
  "candidate": ""\\u001b[33mhello\\u001b[39mworld"",
  "lines": [
    "\\u001b[33mhello\\u001b[39mworld",
  ],
}
`;

exports[`functional:internal/tokenize > core > should support emojis (0) 1`] = `
{
  "candidate": ""🦄 🦾 🚀"",
  "lines": [
    "🦄",
    "🦾",
    "🚀",
  ],
}
`;

exports[`functional:internal/tokenize > core > should support emojis (1) 1`] = `
{
  "candidate": ""Doing the heavy lifting so you don't have to 😉🦾"",
  "lines": [
    "Doing the heavy lifting so you don't have to",
    "😉🦾",
  ],
}
`;

exports[`functional:internal/tokenize > options.columns > should build dynamically wrapped string 1`] = `
{
  "candidate": ""0 1 2 3 4 5 6 7 8 9\\n"",
  "lines": [
    "0 1",
    "2 3",
    "4 5 6",
    "7 8 9",
    "",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should fill columns and break sequences longer than \`columns\` (0) 1`] = `
{
  "candidate": ""0123456789\\n"",
  "lines": [
    "01234",
    "56789",
    "",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should fill columns and break sequences longer than \`columns\` (1) 1`] = `
{
  "candidate": ""12345678\\r\\n901234567890 12345"",
  "lines": [
    "12345",
    "678",
    "90123",
    "45678",
    "90 12",
    "345",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should fill columns and break sequences longer than \`columns\` (2) 1`] = `
{
  "candidate": ""12345678\\r\\n901234567890 12345"",
  "lines": [
    "12345678",
    "901234567890 12",
    "345",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should fill columns and break sequences longer than \`columns\` (3) 1`] = `
{
  "candidate": ""The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox jumped over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m \\u001b[32mdog and then ran away with the unicorn.\\u001b[39m"",
  "lines": [
    "The \\u001b[1mq",
    "uick\\u001b[22m",
    "brown",
    "\\u001b[31mfox j",
    "umped",
    "over",
    "\\u001b[39mthe \\u001b[3ml",
    "azy\\u001b[23m \\u001b[32md",
    "og an",
    "d the",
    "n ran",
    "away",
    "with",
    "the u",
    "nicor",
    "n.\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should work with no trimming (0) 1`] = `
{
  "candidate": ""0123456789\\n"",
  "lines": [
    "01234",
    "56789",
    "",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should work with no trimming (1) 1`] = `
{
  "candidate": ""12345678\\r\\n901234567890 12345"",
  "lines": [
    "12345",
    "678",
    "90123",
    "45678",
    "90 12",
    "345",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should work with no trimming (2) 1`] = `
{
  "candidate": ""12345678\\r\\n901234567890 12345"",
  "lines": [
    "12345678",
    "901234567890 ",
    "12345",
  ],
}
`;

exports[`functional:internal/tokenize > options.fill > should work with no trimming (3) 1`] = `
{
  "candidate": ""The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox jumped over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m \\u001b[32mdog and then ran away with the unicorn.\\u001b[39m"",
  "lines": [
    "The \\u001b[1mq",
    "uick\\u001b[22m ",
    "brown",
    " \\u001b[31mfox ",
    "jumpe",
    "d ove",
    "r \\u001b[39mthe",
    " \\u001b[3mlazy\\u001b[23m",
    " \\u001b[32mdog ",
    "and t",
    "hen r",
    "an aw",
    "ay wi",
    "th th",
    "e uni",
    "corn.\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should break sequences longer than \`columns\` (0) 1`] = `
{
  "candidate": ""The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox jumped over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m \\u001b[32mdog and then ran away with the unicorn.\\u001b[39m"",
  "lines": [
    "The",
    "\\u001b[1mquick\\u001b[22m",
    "brown",
    "\\u001b[31mfox j",
    "umped",
    "over",
    "\\u001b[39mthe",
    "\\u001b[3mlazy\\u001b[23m",
    "\\u001b[32mdog",
    "and",
    "then",
    "ran",
    "away",
    "with",
    "the u",
    "nicor",
    "n.\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should break sequences longer than \`columns\` (1) 1`] = `
{
  "candidate": ""12345678\\r\\n901234567890"",
  "lines": [
    "12345678",
    "9012345678",
    "90",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should break sequences longer than \`columns\` (2) 1`] = `
{
  "candidate": ""Check out the GitHub for Flex Development, it is supercalifragilisticexpialidocious"",
  "lines": [
    "Check out the",
    "GitHub for Flex",
    "Development, it",
    "is supercalifrag",
    "ilisticexpialido",
    "cious",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should break sequences longer than \`columns\` (3) 1`] = `
{
  "candidate": ""\\u001b[32mhelloworld\\u001b[39m"",
  "lines": [
    "\\u001b[32mh",
    "e",
    "l",
    "l",
    "o",
    "w",
    "o",
    "r",
    "l",
    "d\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should break sequences longer than \`columns\` (4) 1`] = `
{
  "candidate": ""\\u001b[33mhello\\u001b[39mworld"",
  "lines": [
    "\\u001b[33mhello\\u001b[39m",
    "world",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should break sequences longer than \`columns\` (5) 1`] = `
{
  "candidate": ""Check out the \\u001b]8;;https://github.com/flex-development\\u0007\\u001b[1mGitHub\\u001b[22m for Flex Development\\u001b]8;;\\u0007, it \\u001b[41mis \\u001b]8;;https://github.com/flex-development\\u0007supercalifragilisticexpialidocious\\u001b]8;;\\u0007\\u001b[49m"",
  "lines": [
    "Check out the",
    "\\u001b]8;;https://github.com/flex-development\\u0007\\u001b[1mGitHub\\u001b[22m for Flex",
    "Development\\u001b]8;;\\u0007, it",
    "\\u001b[41mis \\u001b]8;;https://github.com/flex-development\\u0007supercalifrag",
    "ilisticexpialido",
    "cious\\u001b]8;;\\u0007\\u001b[49m",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should handle no trimming 1`] = `
{
  "candidate": ""   "",
  "lines": [
    "  ",
    " ",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should handle no trimming 2`] = `
{
  "candidate": ""foo   bar"",
  "lines": [
    "foo",
    "   ",
    "bar",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should handle no trimming 3`] = `
{
  "candidate": ""0123456789\\n "",
  "lines": [
    "01234",
    "56789",
    " ",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should handle no trimming 4`] = `
{
  "candidate": ""\\u001b[42m hello \\u001b[49m"",
  "lines": [
    "\\u001b[42m hello \\u001b[49m",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should handle short sequences 1`] = `
{
  "candidate": ""foo   bar"",
  "lines": [
    "foo",
    "bar",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should merge last line if it only contains ansi 1`] = `
{
  "candidate": ""\\u001b[32mhelloworld  \\u001b[39m"",
  "lines": [
    "\\u001b[32mhe",
    "ll",
    "ow",
    "or",
    "ld\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should support emojis 1`] = `
{
  "candidate": ""🦄🦾🚀"",
  "lines": [
    "🦄",
    "🦾",
    "🚀",
  ],
}
`;

exports[`functional:internal/tokenize > options.hard > should support fullwidth characters 1`] = `
{
  "candidate": ""안녕하세"",
  "lines": [
    "안",
    "녕",
    "하",
    "세",
  ],
}
`;

exports[`functional:internal/tokenize > options.indent > should indent each line (0) 1`] = `
{
  "candidate": ""The quick brown fox jumped over the lazy dog"",
  "lines": [
    "  The quick brown",
    "  fox jumped over",
    "  the lazy dog",
  ],
}
`;

exports[`functional:internal/tokenize > options.indent > should indent each line (1) 1`] = `
{
  "candidate": ""The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox jumped over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m \\u001b[32mdog and then ran away with the unicorn.\\u001b[39m"",
  "lines": [
    "The \\u001b[1mquick\\u001b[22m brown \\u001b[31mfox jumped",
    "  over \\u001b[39mthe \\u001b[3mlazy\\u001b[23m \\u001b[32mdog and then",
    "    ran away with the unicorn.\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.indent > should indent each line (2) 1`] = `
{
  "candidate": ""hello\\r\\nworld 🌎"",
  "lines": [
    " hello",
    " world",
    " 🌎",
  ],
}
`;

exports[`functional:internal/tokenize > options.indent > should work with dynamic columns 1`] = `
{
  "candidate": ""whether to respect\\nunstable tags"",
  "lines": [
    "whether to respect",
    "                                         unstable tags",
  ],
}
`;

exports[`functional:internal/tokenize > options.pad* > should add padding to each line (0) 1`] = `
{
  "candidate": ""🦄 🦾 🚀"",
  "lines": [
    "  🦄",
    "  🦾",
    "  🚀",
  ],
}
`;

exports[`functional:internal/tokenize > options.pad* > should add padding to each line (1) 1`] = `
{
  "candidate": ""0 1 2 3 4 5 6 7 8 9\\n"",
  "lines": [
    "0    ",
    "1    ",
    "2    ",
    "3    ",
    "4    ",
    "5    ",
    "6    ",
    "7    ",
    "8    ",
    "9    ",
    "    ",
  ],
}
`;

exports[`functional:internal/tokenize > options.pad* > should add padding to each line (2) 1`] = `
{
  "candidate": ""0 1 2 3 4 5 6 7 8 9"",
  "lines": [
    "     |0|     ",
    "     |1|     ",
    "     |2|     ",
    "     |3|     ",
    "     |4|     ",
    "     |5|     ",
    "     |6|     ",
    "     |7|     ",
    "     |8|     ",
    "     |9|     ",
  ],
}
`;

exports[`functional:internal/tokenize > options.pad* > should add padding to each line (3) 1`] = `
{
  "candidate": ""The quick brown fox jumped over the lazy dog"",
  "lines": [
    " The quick brown ",
    " fox jumped over ",
    " the lazy dog ",
  ],
}
`;

exports[`functional:internal/tokenize > options.pad* > should work with dynamic columns 1`] = `
{
  "candidate": ""whether color output\\nis enabled"",
  "lines": [
    "whether color output",
    "                                         is enabled",
  ],
}
`;

exports[`functional:internal/tokenize > options.stripAnsi > should remove ansi escape codes before wrapping (0) 1`] = `
{
  "candidate": ""The quick brown fox jumped over the lazy dog and then ran away with the unicorn."",
  "lines": [
    "The quick brown fox",
    "jumped over the lazy",
    "dog and then ran",
    "away with the",
    "unicorn.",
  ],
}
`;

exports[`functional:internal/tokenize > options.stripAnsi > should remove ansi escape codes before wrapping (1) 1`] = `
{
  "candidate": ""hello world hey!"",
  "lines": [
    "hello world",
    "hey!",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (0) 1`] = `
{
  "candidate": ""   "",
  "lines": [
    "  ",
    " ",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (1) 1`] = `
{
  "candidate": ""0 1 2 3 4 5 6 7 8 9\\n"",
  "lines": [
    "0",
    " ",
    "1",
    " ",
    "2",
    " ",
    "3",
    " ",
    "4",
    " ",
    "5",
    " ",
    "6",
    " ",
    "7",
    " ",
    "8",
    " ",
    "9",
    "",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (2) 1`] = `
{
  "candidate": ""   foo   bar   "",
  "lines": [
    "   foo   bar   ",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (3) 1`] = `
{
  "candidate": ""  a "",
  "lines": [
    "  a ",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (4) 1`] = `
{
  "candidate": ""   a "",
  "lines": [
    "   a ",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (5) 1`] = `
{
  "candidate": ""\\u001b[34m   foo   bar   \\u001b[39m"",
  "lines": [
    "\\u001b[34m   foo   bar   \\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (6) 1`] = `
{
  "candidate": ""foo   bar"",
  "lines": [
    "foo",
    "   ",
    "bar",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (7) 1`] = `
{
  "candidate": ""\\u001b[42m \\u001b[30mok\\u001b[39m \\u001b[49m"",
  "lines": [
    "\\u001b[42m \\u001b[30mok\\u001b[39m \\u001b[49m",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (8) 1`] = `
{
  "candidate": ""\\u001b[42m  \\u001b[30mok\\u001b[39m  \\u001b[49m"",
  "lines": [
    "\\u001b[42m  \\u001b[30mok\\u001b[39m  \\u001b[49m",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (9) 1`] = `
{
  "candidate": ""Hello, \\u001b[1D World!"",
  "lines": [
    "Hello, \\u001b[1D ",
    "World!",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should not trim lines if disabled (10) 1`] = `
{
  "candidate": ""first value in starting sequence\\n  choices: [\\"0\\",\\"1\\",\\"2\\",\\"3\\",\\"4\\",\\"5\\",\\"6\\",\\"7\\",\\"8\\",\\"9\\"]"",
  "lines": [
    "first value in starting sequence",
    "  choices: ["0","1","2","3","4","5","6","7","8","9"]",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should trim whitespace only on actual wrapped lines if enabled (0) 1`] = `
{
  "candidate": ""   foo   bar   "",
  "lines": [
    "foo",
    "bar",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should trim whitespace only on actual wrapped lines if enabled (1) 1`] = `
{
  "candidate": ""   foo   bar   "",
  "lines": [
    "foo",
    "bar",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should trim whitespace only on actual wrapped lines if enabled (2) 1`] = `
{
  "candidate": ""   foo   bar   "",
  "lines": [
    "foo   bar",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should trim whitespace only on actual wrapped lines if enabled (3) 1`] = `
{
  "candidate": ""\\u001b[31m   foo   bar   \\u001b[39m"",
  "lines": [
    "\\u001b[31mfoo",
    "bar\\u001b[39m",
  ],
}
`;

exports[`functional:internal/tokenize > options.trim > should trim whitespace only on actual wrapped lines if enabled (4) 1`] = `
{
  "candidate": ""\\u001b[32m   foo   bar   \\u001b[39m"",
  "lines": [
    "\\u001b[32mfoo   bar\\u001b[39m",
  ],
}
`;
